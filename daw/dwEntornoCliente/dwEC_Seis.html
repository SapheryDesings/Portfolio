<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../../css/clases.css">
  <link rel="stylesheet" href="../../css/mediaQ.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Smooch&family=Titan+One&display=swap" rel="stylesheet">
  <title>Desarrollo web en Entorno de Cliente</title>
</head>
    <body>
        <header>
            <div class="navtop">
                <a href="../dwEntornoCliente/indice_dwEc.html">Desarrollo web en Entorno de Cliente</a>
                <a href="../../index.html">Principal</a>
            </div>
        </header>
        <div class="contenedorApuntes">
            <h2 class="tituloTema" id="subUno">Tema 6. - Análisis y aplicación del modelo de objetos del documento (DOM)</h2>
            
            <!--*********************************************************************-->
            <h3 class="subTitulo">6.1.- El modelo de objetos del documento (DOM)</h3>
            <p>El objetivo es manipular el contenido y la apariencia de una web dinámica. Para ello, los elementos de una página web se deben poder manipular como objetos relacionados. Así apareció el termino DOM (document objects model), el cual define una página web como una estructura organizada de objetos formando entre ellos un árbol de recorrido.</p>
            <h4 class="apartado">Tipos de modelos DOM</h4>
            <p>Es posible dividir el modelo DOM en tres partes diferentes:</p>
            <ul>
                <li><b>Núcleo del DOM:</b> es un modelo estándar para cualquier documento que esté estructurado.</li>
                <li><b>XML DOM:</b> es un modelo estándar para documentos XML.</li>
                <li><b>HTML DOM:</b> es un modelo estándar para documentos HTML.</li>
            </ul>
            <h4 class="apartado">El árbol</h4>
            <p>El último se define mediante una estructura en forma de árbol. Un navegador, transforma de forma automática del contenido en una estructura en árbol, convierte el documento HTML en elementos conocidos como nodos.</p>
            <p>La estructura DOM no solamente se creó para el lenguaje JavaScript. El lenguaje que más se utiliza para el DOM es JavaScript, aunque es una estructura independiente de todo lenguaje.</p>
            <p>También funciona para manipular documentos XML.</p>
            <!--*********************************************************************-->
            <h3 class="subTitulo" id="subDos">6.2.- Objetos del modelo. Propiedades y métodos de los objetos</h3>
            <p>Para acceder a las propiedades o a los métodos de los objetos que se encuentran en el interior de nuestro documento.</p>
            <pre>
                <code>
                    document.getElementById(objetoID).propiedad | metodo([parametros] )
                </code>
            </pre>
            <h4 class="apartado">6.2.1.- Objetos del modelo</h4>
            <p>En la especificación del DOM se definen doce tipos de nodos, emplearemos solamente cinco tipos:</p>
            <ul>
                <li><b>Document</b> es el nodo raíz y del cual derivan todos los nodos del árbol.</li>
                <li><b>Element</b> abarca cada una de las etiquetas XHTML. Este es el único nodo del que pueden derivar otros nodos y es el único capaz de contener los atributos.</li>
                <li><b>Attr.</b> Gracias a este tipo de nodos, se representan los atributos de las etiquetas XHTML, un nodo por cada atributo=valor.</li>
                <li><b>Text</b> es el nodo que contiene el texto entre las etiquetas XHTML.</li>
                <li><b>Comment</b> representa a los comentarios que se incluyen en la página XHTML.</li>
            </ul>
            <p>El resto de tipos de nodos pueden ser: CdataSection, DocumentFragment, DocumentType, EntityReference, Entity, Notation y ProcessingInstruction.</p>
            <h4 class="apartado">6.2.2.- La interfaz Node</h4>
            <p>Para poder gestionar la información de los diferentes nodos, crea un objeto que se conoce como Node. En el interior de este objeto se definen propiedades y métodos que procesarán y manipularán estos documentos. Define una serie de constantes que identifican a los tipos de nodos.</p>
            <table>
                <thead>
                    <tr>
                        <th>Valor</th>
                        <th>Tipo de nodo</th>
                        <th>Constante relacionada</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>Elemento</td>
                        <td>Node.ELEMENT_NODE</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Atributo</td>
                        <td>Node.ATTRIBUTE_NODE</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Texto</td>
                        <td>Node.TEXT_NODE</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>Apartado CDATA</td>
                        <td>Node.CDATA_SECTION_NODE</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>Referencia a entidad</td>
                        <td>Node.ENTITY_REFERENCE_NODE</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td>Entidad</td>
                        <td>Node.ENTITY_NODE</td>
                    </tr>
                    <tr>
                        <td>7</td>
                        <td>Instrucción de procesado</td>
                        <td>Node.PROCESSING_INSTRUCTION_NODE</td>
                    </tr>
                    <tr>
                        <td>8</td>
                        <td>Comentario</td>
                        <td>Node.COMENT_NODE</td>
                    </tr>
                    <tr>
                        <td>9</td>
                        <td>Documento completo</td>
                        <td>Node.DOCUMENT_NODE</td>
                    </tr>
                    <tr>
                        <td>10</td>
                        <td>Nodo de tipo documento</td>
                        <td>Node.DOCUMENT_TYPE_NODE</td>
                    </tr>
                    <tr>
                        <td>11</td>
                        <td>Nodo de fragmento de código</td>
                        <td>Node.DOCUMENT_FRAGMENT_NODE</td>
                    </tr>
                    <tr>
                        <td>12</td>
                        <td>Nodo de anotación</td>
                        <td>Node.NOTATION_NODE</td>
                    </tr>
                </tbody>
            </table>
            <p>Node nos proporciona unas propiedades y métodos que nos permiten acceder a la jerarquía de elementos del árbol.</p>
            <table>
                <thead>
                    <tr>
                        <th>Propiedad/método</th>
                        <th>Valor devuelto</th>
                        <th>Descripción</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>nodeName</td>
                        <td>String</td>
                        <td>Nombre nodo</td>
                    </tr>
                    <tr>
                        <td>nodeValue</td>
                        <td>String</td>
                        <td>Valor nodo</td>
                    </tr>
                    <tr>
                        <td>nodeType</td>
                        <td>Number</td>
                        <td>Una constante definida anteriormente</td>
                    </tr>
                    <tr>
                        <td>ownerDocument</td>
                        <td>Document</td>
                        <td>Referencia del documento al cual pertenece el nodo</td>
                    </tr>
                    <tr>
                        <td>firstChild</td>
                        <td>Node</td>
                        <td>Referencia al primer nodo de la lista</td>
                    </tr>
                    <tr>
                        <td>lastChild</td>
                        <td>Node</td>
                        <td>Referencia al último nodo de la lista</td>
                    </tr>
                    <tr>
                        <td>childNodes</td>
                        <td>NodeList</td>
                        <td>Lista de todos los nodos hijos del nodo actual</td>
                    </tr>
                    <tr>
                        <td>parentNodes</td>
                        <td>Node</td>
                        <td>Referencia al nodo padre del hijo</td>
                    </tr>
                    <tr>
                        <td>previousSibling</td>
                        <td>Node</td>
                        <td>Referencia al nodo hermano anterior</td>
                    </tr>
                    <tr>
                        <td>nextSibling</td>
                        <td>Node</td>
                        <td>Referencia al nodo hermano siguiente</td>
                    </tr>
                    <tr>
                        <td>hasChildNodes</td>
                        <td>Boolean</td>
                        <td>Devuelve true si el nodo tiene uno o más hijos</td>
                    </tr>
                    <tr>
                        <td>attributes</td>
                        <td>NamedNodeMap</td>
                        <td>Se emplean como nodo tipo Element</td>
                    </tr>
                    <tr>
                        <td>appendChild(nodo)</td>
                        <td>Node</td>
                        <td>Añade un nuevo nodo al final de la lista</td>
                    </tr>
                    <tr>
                        <td>removeChild(nodo)</td>
                        <td>Node</td>
                        <td>Elimina un nodo de la lista</td>
                    </tr>
                    <tr>
                        <td>replaceChild(nuevoNodo, anteriorNodo)</td>
                        <td>Node</td>
                        <td>Reemplaza el nodo anterior por un nuevo nodo</td>
                    </tr>
                    <tr>
                        <td>insertBefore(nuevoNodo, anteriorNodo)</td>
                        <td>Node</td>
                        <td>Inserta un nuevo nodo antes de la posición del nodo anterior</td>
                    </tr>
                </tbody>
            </table>
            <p>Con todas estas propiedades y métodos ya es posible acceder a los nodos del árbol y a la jerarquía, así como crear, modificar o eliminar nodos.</p>
            <div class="menuOpcional">
                <a href="../dwEntornoCliente/indice_dwEc.html"><div class="botonO">Índice</div></a>
                <a href="../../index.html"><div class="botonO">Principal</div></a>
                <a href="#subUno"><div class="botonO">Arriba</div></a>
            </div>
            <!--*********************************************************************-->
            <h3 class="subTitulo" id="subTres">6.3.- Acceso al documento desde código</h3>
            <p>Una vez construido el árbol de nodos del DOM, ya es posible utilizar sus funciones para acceder a distintos nodos del árbol.</p>
            <p>Una vez que se ha accedido a esa parte del documento, ya es posible modificar los valores, crear y añadir elementos, moverlos de sitio, etcétera.</p>
            <p>Para poder acceder a un nodo específico, es posible hacerlo a través de dos métodos:</p>
            <ul>
                <li>Partiendo del nodo raíz y a través de los <b>nodos padre</b>, se irá accediendo a los diferentes nodos hijos hasta llegar al elemento deseado.</li>
                <li>Por otro lado, tenemos el <b>acceso directo</b>, el cual, utilizando las funciones del DOM, nos permite acceder directamente al nodo sin tener que atravesar el resto de los nodos. Es el método más utilizado.</li>
            </ul>
            <p>Destacar que, para acceder a todos los nodos de un árbol, este tiene que estar completamente construido, es decir, cuando la página XHTML se haya cargado completamente.</p>
            <pre>
                <code>
                    getElementsByName()
                </code>
            </pre>
            <p>Se obtiene una colección que contiene todos los elementos de la página XHTML cuyo atributo <i>name</i> coincida con el indicado como parámetro</p>
            <pre>
                <code>
                    var elementos = document.getElementsByName(“apellidos”);
                </code>
            </pre>
            <p>Una <b>colección no es un array</b>, aunque se le parezca mucho. Es posible recorrer y referenciar sus elementos como si fuera un array, pero no es posible utilizar métodos de array, como <i>push</i> o <i>pop</i>.</p>
            <p>Si solo tenemos un elemento con <i>name="apellidos"</i> para acceder a él:</p>
            <pre>
                <code>
                    var elemento = document.getElementsByName(“apellidos”)[0];
                </code>
            </pre>
            <p>Si tuviéramos tres elementos con el atributo <i>name="apellidos"</i>, para acceder al segundo elemento:</p>
            <pre>
                <code>
                    var segundo = document.getElementsByName(“apellidos”)[1];
                </code>
            </pre>
            <div class="nota">Recuerda que los arrays comienzan en la posición 0.</div>
            <h4 class="apartado">getElementsByTagName()</h4>
            <p>Esta es una función muy parecida a la anterior, ya que también devuelve una colección de elementos cuya etiqueta XHTML coincida con la que se pasa como parámetro.</p>
            <h4 class="apartado">getElementById()</h4>
            <p>Esta función es la más utilizada y nos permite acceder directamente al elemento a través del ID. Entre paréntesis se escribirá la cadena de texto con el ID. Hay que tener en cuenta que el ID debe ser único en una misma página. La función solo nos devolverá el nodo buscado.</p>
            <pre>
                <code>
                    var elemento = document.getElementById(“apellidos”);
                </code>
            </pre>
            <h4 class="apartado">Acceso a los nodos de tipo atributo</h4>
            <p>Para referenciar a un atributo, como puede ser el atributo <i>type="text"</i> del campo "apellidos", usaremos la colección <i>attributes</i>. Esta colección se cubrirá de diferentes maneras y existirán muchos pares en la colección, tantos como atributos tenga el elemento.</p>
            <p>Para buscar el par correcto, se usará la propiedad <i>nodeName</i>, la cual nos devolverá el nombre del atributo y usaremos <i>node-Value</i> para acceder a su valor.</p>
            <h4 class="apartado">Acceso a los nodos de tipo texto</h4>
            <p>Para ver cómo podemos acceder a la información textual de un nodo.</p>
            <pre>
                <code>
                    p title=”Texto de un párrafo”>Esto es un ejemplo
                    de texto HTML que puedes tener en tu documento. /p
                </code>
            </pre>
            <p>Con la colección <i>childNodes</i> podremos acceder a los nodos hijo de un elemento, sean de tipo elemento o de tipo texto.</p>
            <h4 class="apartado">Creación y borrado de nodos</h4>
            <p>Uno de los objetivos para los que se creó el DOM es para crear y borrar los nodos, Es posible crear elementos e insertarlos después en el DOM, y la actualización quedará automáticamente reflejada por el navegador. Además, es posible mover nodos que ya existen, solo insertándolos en otro lugar cualquiera del árbol del DOM.</p>
            <p>Cuando estemos creando <b>nodos de elementos</b>, el elemento debe estar <b>en minúsculas</b>. Si bien HTML no es sensible a máyusculas y minúsculas, XHTML sí que lo es y, por lo tanto, el elemento deberá ir en minúsculas.</p>
            <p>Se utilizarán los métodos createElement(), createTextNode() y appendChild(), que nos permiten crear un elemento, un nodo de texto y añadir un nuevo nodo hijo.</p>
            <div class="menuOpcional">
                <a href="../dwEntornoCliente/indice_dwEc.html"><div class="botonO">Índice</div></a>
                <a href="../../index.html"><div class="botonO">Principal</div></a>
                <a href="#subUno"><div class="botonO">Arriba</div></a>
            </div>
            <!--*********************************************************************-->
            <h3 class="subTitulo" id="subCuatro">6.4.- Programación de eventos</h3>
            <p><b>Sin eventos no hay prácticamente</b> scripts. Los eventos programados son los que disparan la ejecución de dichos scripts. JavaScript fue diseñado para añadir interactividad, el usuario hace algo y la página reacciona.</p>
            <p>Tiene que detectar las acciones del usuario para saber cuándo reaccionar. También necesita saber las funciones que ejecutar cuando se producen esas acciones.</p>
            <p>Cuando el usuario realiza algo, se genera un evento. Algunos eventos que no están directamente relacionados con acciones, como la carga de un documento, que se disparará de forma automática.</p>
            <h3 class="subTitulo" id="subCinco">6.5.- Modelos de eventos</h3>
            <p>Tenemos cuatro modelos de registro de eventos: en línea, tradicional, según W3C y según Microsoft.</p>
            <h4 class="apartado">Modelo de registro de eventos en línea</h4>
            <p>Se añaden los eventos como un atributo más del objeto. No se recomienda ya que JavaScript está integrado en el HTML y lo que queremos es tener separación entre la estructura y la programación.</p>
            <pre>
                <code>
                    a href=”pagina.html” onClick=”alertar()”>Pulsa aquí a
                </code>
            </pre>
            <h4 class="apartado">Modelo de registro de eventos tradicional</h4>
            <p>Los eventos se asignan como una propiedad del objeto y fuera de la estructura HTML. No es un modelo estándar.</p>
            <p>La palabra reservada <i>This</i> se utiliza para hacer referencia al objeto donde se programó el evento.</p>
            <ul>
                <li>Para asignar un evento se haría: <b>elemento.evento = hacerAlgo;</b></li>
                <li>En cambio, para eliminar ese evento del objeto: <b>elemento.evento = null;</b></li>
            </ul>
            <p>Se puede programar cuando queremos que se dispare el evento, que puede ser en la fase de captura o de burbujeo.</p>
            <p>La palabra reservada <i>This</i> también se utiliza en este modelo para hacer referencia al objeto donde se programó el evento.</p>
            <pre>
                <code>
                    document.getElementById(“mienlace”).addEventListener(‘click’,alertar,false);
                </code>
            </pre>
            <h4 class="apartado">Modelo de registro de eventos según Microsoft</h4>
            <p>Se parece al utilizado por el W3C:</p>
            <ul>
                <li>Para asignar un evento se usa: <b>attachEvent().</b></li>
                <li>En cambio, para eliminar un evento se usa: <b>detachEvent().</b></li>
            </ul>
            <p>Aquí los eventos siempre burbujean, no hay forma de captura.</p>
            <p>No puede emplearse la palabra reservada <i>This</i>, porque la función es copiada, no referenciada. El nombre de los eventos empieza por "on" + nombre de evento.</p>
            <pre>
                <code>
                    document.getElementById(“mienlace”).attach-Event(‘onclick’, alertar);
                </code>
            </pre>
            <div class="menuOpcional">
                <a href="../dwEntornoCliente/indice_dwEc.html"><div class="botonO">Índice</div></a>
                <a href="../../index.html"><div class="botonO">Principal</div></a>
                <a href="#subUno"><div class="botonO">Arriba</div></a>
            </div>
            <!--*********************************************************************-->
        </div><!-- Fin contenedorApuntes -->
        <footer class="pieApuntes"><div>- SapheryDesings -</div></footer>
    </body>
</html>